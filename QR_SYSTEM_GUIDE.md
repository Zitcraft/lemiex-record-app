# QR Code System - Lemiex Record App

## ğŸ“± Tá»•ng quan

Há»‡ thá»‘ng QR code giÃºp quáº£n lÃ½ vÃ  nháº­n dáº¡ng á»©ng dá»¥ng Record trÃªn cÃ¡c mÃ¡y khÃ¡c nhau.

## ğŸ¯ CÃ¡c QR Code

### 1. USB-COM Setup
- **MÃ£ QR**: `USB-COM-SETUP`
- **Chá»©c nÄƒng**: HÆ°á»›ng dáº«n cáº¥u hÃ¬nh cá»•ng COM USB
- **Vá»‹ trÃ­ hiá»ƒn thá»‹**: BÃªn trÃ¡i, dÆ°á»›i Camera Preview
- **Khi scan**: Hiá»ƒn thá»‹ thÃ´ng bÃ¡o "USB-COM Setup" mÃ u cyan

### 2. Factory Default
- **MÃ£ QR**: `FACTORY-DEFAULT`
- **Chá»©c nÄƒng**: Reset cÃ i Ä‘áº·t vá» máº·c Ä‘á»‹nh
- **Vá»‹ trÃ­ hiá»ƒn thá»‹**: Giá»¯a, dÆ°á»›i Camera Preview
- **Khi scan**: Hiá»ƒn thá»‹ thÃ´ng bÃ¡o "Factory Default" mÃ u cyan

### 3. App Identifier (This App)
- **MÃ£ QR**: `LEMIEX-RECORD-APP-IDENTIFIER-COM3`
- **Chá»©c nÄƒng**: Nháº­n dáº¡ng á»©ng dá»¥ng Ä‘ang sá»­ dá»¥ng COM3
- **Vá»‹ trÃ­ hiá»ƒn thá»‹**: BÃªn pháº£i, dÆ°á»›i Camera Preview
- **Khi scan**: 
  - âœ… QR nhÃ¡y sÃ¡ng (flash gold color)
  - âœ… PhÃ¡t Ã¢m thanh thÃ´ng bÃ¡o
  - âœ… Hiá»ƒn thá»‹ "âœ“ App QR nháº­n dáº¡ng - COM3 Active" mÃ u vÃ ng gold

## ğŸ¨ Giao diá»‡n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Camera Preview            â”‚
â”‚                                â”‚
â”‚      (Video Feed)              â”‚
â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Quick Access            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   [QR]   â”‚   [QR]   â”‚   [QR]   â”‚
â”‚ USB-COM  â”‚ Factory  â”‚ This App â”‚
â”‚          â”‚ Default  â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’¡ CÃ¡ch sá»­ dá»¥ng

### Nháº­n dáº¡ng á»©ng dá»¥ng trÃªn nhiá»u mÃ¡y

**Ká»‹ch báº£n**: Báº¡n cÃ³ 3 mÃ¡y sá»­ dá»¥ng app Record, má»—i mÃ¡y káº¿t ná»‘i scanner khÃ¡c nhau (COM3, COM4, COM5)

**Giáº£i phÃ¡p**:
1. Táº¡o QR riÃªng cho má»—i app:
   - MÃ¡y 1: `LEMIEX-RECORD-APP-IDENTIFIER-COM3`
   - MÃ¡y 2: `LEMIEX-RECORD-APP-IDENTIFIER-COM4`
   - MÃ¡y 3: `LEMIEX-RECORD-APP-IDENTIFIER-COM5`

2. Khi cáº§n biáº¿t mÃ¡y nÃ o Ä‘ang dÃ¹ng:
   - Scan QR "This App" trÃªn mÃ n hÃ¬nh
   - App sáº½ nhÃ¡y sÃ¡ng + phÃ¡t Ã¢m thanh
   - Tráº¡ng thÃ¡i hiá»ƒn thá»‹: "COM3 Active" (hoáº·c COM4, COM5)

3. Lá»£i Ã­ch:
   - XÃ¡c Ä‘á»‹nh nhanh app nÃ o Ä‘ang hoáº¡t Ä‘á»™ng
   - KhÃ´ng cáº§n kiá»ƒm tra cá»•ng COM thá»§ cÃ´ng
   - Tiá»‡n lá»£i khi cÃ³ nhiá»u mÃ¡y giá»‘ng nhau

## ğŸ”§ TÃ¹y chá»‰nh

### Táº¡o QR cho cá»•ng COM khÃ¡c

**BÆ°á»›c 1**: Chá»‰nh sá»­a `generate_qr_codes.py`

```python
# Thay COM3 thÃ nh COM4 (hoáº·c cá»•ng báº¡n muá»‘n)
generate_qr_code(
    data="LEMIEX-RECORD-APP-IDENTIFIER-COM4",  # â† Äá»•i sá»‘
    filename="app-identifier",
    output_dir=output_dir
)
```

**BÆ°á»›c 2**: Generate láº¡i QR

```powershell
python generate_qr_codes.py
python convert_qr_to_png.py
```

**BÆ°á»›c 3**: Cáº­p nháº­t code kiá»ƒm tra trong `main_window.py`

```python
# TÃ¬m dÃ²ng nÃ y trong on_barcode_scanned():
if order_id.upper() == "LEMIEX-RECORD-APP-IDENTIFIER-COM3":

# Äá»•i thÃ nh:
if order_id.upper() == "LEMIEX-RECORD-APP-IDENTIFIER-COM4":
```

**BÆ°á»›c 4**: Update status message

```python
self.status_label.configure(
    text="âœ“ App QR nháº­n dáº¡ng - COM4 Active",  # â† Äá»•i sá»‘
    text_color="#FFD700"
)
```

### Thay Ä‘á»•i mÃ u flash

Trong `flash_app_qr()` method:

```python
# MÃ u hiá»‡n táº¡i: #FFD700 (Gold)
flash_colors = ["#FFD700", original_color, "#FFD700", ...]

# Äá»•i sang mÃ u khÃ¡c:
flash_colors = ["#00FF00", original_color, "#00FF00", ...]  # Green
flash_colors = ["#FF0000", original_color, "#FF0000", ...]  # Red
flash_colors = ["#00FFFF", original_color, "#00FFFF", ...]  # Cyan
```

### Thay Ä‘á»•i thá»i gian flash

```python
# Thá»i gian má»—i flash (milliseconds)
flash_delays = [100, 200, 300, 400, 500, 600]  # Hiá»‡n táº¡i: 100ms má»—i láº§n

# Flash nhanh hÆ¡n:
flash_delays = [50, 100, 150, 200, 250, 300]   # 50ms má»—i láº§n

# Flash cháº­m hÆ¡n:
flash_delays = [200, 400, 600, 800, 1000, 1200]  # 200ms má»—i láº§n
```

## ğŸ“„ Files liÃªn quan

- **QR Images**: `qr_codes/` folder
  - `USB-COM.png` - USB-COM setup QR
  - `Factory-Default.png` - Factory default QR
  - `app-identifier.png` - App identifier QR

- **Generator Scripts**:
  - `generate_qr_codes.py` - Generate SVG QR codes
  - `convert_qr_to_png.py` - Convert SVG to PNG

- **Main Code**:
  - `src/main_window.py` - QR display & flash logic
  - `Lemiex-record-app.spec` - Bundle QR images in build

## ğŸš€ Build vá»›i QR Codes

QR codes sáº½ tá»± Ä‘á»™ng Ä‘Æ°á»£c bundle vÃ o executable:

```powershell
.\build.bat
```

Executable sáº½ chá»©a:
- 3 QR code PNG files
- Flash effect code
- Sound notification

## ğŸ§ª Testing

### Test flash effect:

1. Cháº¡y app: `python main.py`
2. Káº¿t ná»‘i scanner
3. Scan QR "app-identifier" 
4. Kiá»ƒm tra:
   - âœ… QR cÃ³ nhÃ¡y sÃ¡ng mÃ u vÃ ng?
   - âœ… CÃ³ phÃ¡t Ã¢m thanh?
   - âœ… Status hiá»ƒn thá»‹ "COM3 Active"?

### Test cÃ¡c QR khÃ¡c:

1. Scan "USB-COM" QR â†’ Status: "USB-COM Setup" (cyan)
2. Scan "Factory-Default" QR â†’ Status: "Factory Default" (cyan)
3. Scan order ID bÃ¬nh thÆ°á»ng â†’ Ghi hÃ¬nh nhÆ° thÆ°á»ng

## ğŸ“ Log Messages

Khi scan QR, log sáº½ ghi:

```
INFO - Barcode scanned: LEMIEX-RECORD-APP-IDENTIFIER-COM3
INFO - App identifier QR scanned - triggering flash
INFO - App QR flash triggered
```

Náº¿u lá»—i:

```
ERROR - Failed to load QR USB-COM.png: [error details]
ERROR - Flash error: [error details]
```

## ğŸ TÃ­nh nÄƒng ná»•i báº­t

âœ… **Visual Feedback**: QR nhÃ¡y sÃ¡ng khi scan
âœ… **Audio Feedback**: PhÃ¡t Ã¢m thanh thÃ´ng bÃ¡o
âœ… **Status Display**: Hiá»ƒn thá»‹ rÃµ rÃ ng COM port
âœ… **Multi-machine Support**: Dá»… dÃ ng nháº­n dáº¡ng nhiá»u mÃ¡y
âœ… **No Collision**: KhÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n scan order ID
âœ… **Embedded**: QR Ä‘Æ°á»£c bundle sáºµn trong executable

---

**Version**: 1.0.0  
**Last Updated**: December 1, 2025
